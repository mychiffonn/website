---
import type { ProcessedPublication } from "@/schemas"

import { loadAllPublications } from "@/lib/publications/loader"
import Layout from "@/layouts/Layout.astro"
import Section from "@/components/layout/Section.astro"
import PubCard from "@/components/publications/PubCard.astro"

const { publicationsByYear, years } = await loadAllPublications()
---

<Layout title="Publications" description="Academic publications and research papers">
  <div class="space-y-8">
    {
      years.length > 0 ? (
        years.map((year) => (
          <Section title={year.toString()}>
            <div class="space-y-4">
              {publicationsByYear[year].map((pub: ProcessedPublication) => (
                <PubCard pub={pub} />
              ))}
            </div>
          </Section>
        ))
      ) : (
        <div class="py-12 text-center">
          <h2 class="text-muted-foreground mb-2 text-xl font-medium">No publications found</h2>
          <p class="text-muted-foreground">
            Publications will appear here once they are added to the bibliography.
          </p>
        </div>
      )
    }
  </div>
</Layout>
