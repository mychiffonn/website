---
import { NAV_LINKS, SITE } from "@/config"
import Link from "@/components/base/Link.astro"
import ThemeToggle from "@/components/layout/ThemeToggle.astro"
import MobileMenu from "@/components/ui/mobile-menu"
---

<header>
  <div class="mx-auto flex max-w-3xl items-center justify-between gap-4 px-4 py-3">
    <Link href="/" class="flex shrink-0 items-center justify-center gap-3" transition:persist>
      <span class="hidden h-full text-lg font-medium min-[300px]:block">{SITE.title}</span>
    </Link>
    <div class="flex items-center sm:gap-4">
      <nav class="hidden items-center gap-2 text-sm sm:flex sm:gap-3">
        {
          NAV_LINKS.map((item) => {
            const isActive =
              Astro.url.pathname === item.href ||
              (item.href !== "/" && Astro.url.pathname.startsWith(item.href))
            return (
              <Link
                href={item.href}
                class:list={[
                  "relative px-2 py-1 capitalize transition-colors duration-300 ease-in-out",
                  isActive
                    ? "text-foreground after:bg-primary font-medium after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-full after:rounded-full"
                    : "text-foreground/60 hover:text-accent hover:bg-accent/10 hover:rounded-md"
                ]}
              >
                {item.label}
              </Link>
            )
          })
        }
      </nav>
      <MobileMenu client:load transition:persist />
      <ThemeToggle transition:persist />
    </div>
  </div>
</header>
